<ng-container *ngIf="!showAsSimpleTable">
  <ng-container *ngIf="!screenSizeService.isMobile() && !showForDetailPage">
    <div class="padded items-table-wrapper">
      <div class="table-scrollable" *ngIf="items.length">
        <table mat-table [dataSource]="items" class="mat-elevation-z8 full-width">
          <ng-container matColumnDef="select">
            <th [class.thin]="!isSelectable" mat-header-cell *matHeaderCellDef>
              <app-master-select *ngIf="isSelectable"
                                 [items]="items"
                                 [selectionGroupName]="itemType"
              ></app-master-select>
            </th>
            <td mat-cell *matCellDef="let element" [class]="(element.status || element.severity) | lowercase"
                [class.thin]="!isSelectable"
                class="statusLeftBorderColor">
              <mat-checkbox *ngIf="isSelectable" (change)="toggleSelection($event, element)"
                            [checked]="isSelected(element)"></mat-checkbox>
            </td>
          </ng-container>

          <ng-container *ngFor="let columnConfigItem of desktopConfig" [matColumnDef]="columnConfigItem.fieldName">
            <th mat-header-cell
                *matHeaderCellDef>{{ "labels." + (columnConfigItem.label || columnConfigItem.fieldName) | translate }}</th>
            <td mat-cell *matCellDef="let item">
              <ng-container
                *ngIf="columnConfigItem.columnType == columnType().BASIC || columnConfigItem.columnType == columnType().SPLIT_WITH_BASIC">
                <span>{{ getProperty(item, columnConfigItem.fieldName) }}</span>
              </ng-container>
              <ng-container *ngIf="columnConfigItem.columnType == columnType().LONG_TEXT">
                <span>{{ getTrimmedProperty(item, columnConfigItem.fieldName) }}</span>
                <div *ngIf="isLongText(getTrimmedProperty(item, columnConfigItem.fieldName))">
                  <button mat-button color="accent" class="float-right"
                          (click)="showMore(item)">{{ "buttons.showMore" | translate }}</button>
                </div>
              </ng-container>
              <ng-container *ngIf="columnConfigItem.columnType == columnType().LINK">
                <a [routerLink]="getUrl(item, columnConfigItem.linkUrlRecipe)">
                  {{ getProperty(item, columnConfigItem.fieldName) }}
                </a>
              </ng-container>
              <ng-container *ngIf="columnConfigItem.columnType == columnType().SPLIT_WITH_BASIC">
                <ng-container *ngIf="!columnConfigItem.additionalLinkUrlRecipe">
                  <span class="additional-field">
                    <span *ngIf="columnConfigItem.separator == separator().VERTICAL_BAR"
                          class="separator-padding">|</span>
                    <span *ngIf="columnConfigItem.separator == separator().BRACKETS">(</span>
                      <ng-container *ngIf="columnConfigItem.additionalLinkUrlRecipe">
                        <a [routerLink]="getUrl(item, columnConfigItem.additionalLinkUrlRecipe)">
                        {{ "" + getProperty(item, columnConfigItem.additionalFieldName) + "" }}
                      </a>
                      </ng-container>
                      <ng-container *ngIf="!columnConfigItem.additionalLinkUrlRecipe">
                        {{ "" + getProperty(item, columnConfigItem.additionalFieldName) + "" }}
                      </ng-container>
                    <span *ngIf="columnConfigItem.separator == separator().BRACKETS">)</span>
                  </span>
                </ng-container>
              </ng-container>
            </td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
      </div>
    </div>
  </ng-container>

  <ng-container *ngIf="screenSizeService.isMobile() || showForDetailPage">
    <div class="padded relativeWrapper">
      <app-master-select
        *ngIf="items.length && isSelectable"
        [items]="items"
        [selectionGroupName]="itemType"
      >
      </app-master-select>
      <div *ngFor="let item of items" class="item-card-wrapper">
        <mat-card *ngIf="item" [class]="(item.status || item.severity) | lowercase" class="statusLeftBorderColor">
          <div *ngIf="headerElement && headerElement.linkUrlRecipe" class="card-header">
            <mat-checkbox *ngIf="isSelectable" (change)="toggleSelection($event, item)"
                          [checked]="isSelected(item)"></mat-checkbox>
            <a [routerLink]="getUrl(item, headerElement.linkUrlRecipe)">
              {{ getProperty(item, headerElement.fieldName) }}
            </a>
          </div>
          <table>
            <ng-container *ngFor="let columnConfigItem of mobileConfig">
              <tr *ngIf="!columnConfigItem.isHeader">
                <td
                  class="label">{{ "labels." + (columnConfigItem.label || columnConfigItem.fieldName) | translate }}</td>
                <td [class]="columnConfigItem.fieldName" [class.whiteSpaceBreak]="showForDetailPage">
                  <ng-container
                    *ngIf="columnConfigItem.columnType == columnType().BASIC || columnConfigItem.columnType == columnType().SPLIT_WITH_BASIC">
                    <span>{{ getProperty(item, columnConfigItem.fieldName) }}</span>
                  </ng-container>
                  <ng-container *ngIf="columnConfigItem.columnType == columnType().LONG_TEXT">
                    <span>{{ getTrimmedProperty(item, columnConfigItem.fieldName) }}</span>
                    <div *ngIf="isLongText(getTrimmedProperty(item, columnConfigItem.fieldName))">
                      <button mat-button color="accent" class="float-right"
                              (click)="showMore(item)">{{ "buttons.showMore" | translate }}</button>
                    </div>
                  </ng-container>
                  <ng-container *ngIf="columnConfigItem.columnType == columnType().LINK">
                    <a [routerLink]="getUrl(item, columnConfigItem.linkUrlRecipe)">
                      {{ getProperty(item, columnConfigItem.fieldName) }}
                    </a>
                  </ng-container>
                  <ng-container *ngIf="columnConfigItem.columnType == columnType().SPLIT_WITH_BASIC">
                    <ng-container *ngIf="!columnConfigItem.additionalLinkUrlRecipe">
                      <span class="additional-field">
                        <span *ngIf="columnConfigItem.separator == separator().VERTICAL_BAR"
                              class="separator-padding">|</span>
                        <span *ngIf="columnConfigItem.separator == separator().BRACKETS">(</span>
                          <ng-container *ngIf="columnConfigItem.additionalLinkUrlRecipe">
                            <a [routerLink]="getUrl(item, columnConfigItem.additionalLinkUrlRecipe)">
                            {{ "" + getProperty(item, columnConfigItem.additionalFieldName) + "" }}
                          </a>
                          </ng-container>
                          <ng-container *ngIf="!columnConfigItem.additionalLinkUrlRecipe">
                            {{ "" + getProperty(item, columnConfigItem.additionalFieldName) + "" }}
                          </ng-container>
                        <span *ngIf="columnConfigItem.separator == separator().BRACKETS">)</span>
                      </span>
                    </ng-container>
                  </ng-container>
                </td>
              </tr>
            </ng-container>
          </table>
        </mat-card>
      </div>
    </div>
  </ng-container>
</ng-container>

<ng-container *ngIf="showAsSimpleTable">
  <div class="padded relativeWrapper">
    <div *ngFor="let item of items" class="simple-table">
      <table>
        <ng-container *ngFor="let columnConfigItem of simpleTableConfig">
          <tr *ngIf="!columnConfigItem.isHeader">
            <td class="label">{{ "labels." + (columnConfigItem.label || columnConfigItem.fieldName) | translate }}</td>
            <td [class]="columnConfigItem.fieldName" class="relativeWrapper"
                [class.columnWithCopyIcon]="columnConfigItem.fieldName === 'description'">


              <ng-container
                *ngIf="columnConfigItem.columnType == columnType().BASIC || columnConfigItem.columnType == columnType().SPLIT_WITH_BASIC || columnConfigItem.columnType == columnType().LONG_TEXT">
                <span>{{ getProperty(item, columnConfigItem.fieldName) }}</span>
                <mat-icon *ngIf="columnConfigItem.fieldName === 'description'" class="copyToClipboard"
                          [cdkCopyToClipboard]="getProperty(item, columnConfigItem.fieldName)"
                          (click)="showCopiedNotification()">content_copy
                </mat-icon>
              </ng-container>
              <ng-container *ngIf="columnConfigItem.columnType == columnType().LINK">
                <a [routerLink]="getUrl(item, columnConfigItem.linkUrlRecipe)">
                  {{ getProperty(item, columnConfigItem.fieldName) }}
                </a>
              </ng-container>
              <ng-container *ngIf="columnConfigItem.columnType == columnType().SPLIT_WITH_BASIC">
                <ng-container *ngIf="!columnConfigItem.additionalLinkUrlRecipe">
                      <span class="additional-field">
                        <span *ngIf="columnConfigItem.separator == separator().VERTICAL_BAR"
                              class="separator-padding">|</span>
                        <span *ngIf="columnConfigItem.separator == separator().BRACKETS">(</span>
                          <ng-container *ngIf="columnConfigItem.additionalLinkUrlRecipe">
                            <a [routerLink]="getUrl(item, columnConfigItem.additionalLinkUrlRecipe)">
                            {{ "" + getProperty(item, columnConfigItem.additionalFieldName) + "" }}
                          </a>
                          </ng-container>
                          <ng-container *ngIf="!columnConfigItem.additionalLinkUrlRecipe">
                            {{ "" + getProperty(item, columnConfigItem.additionalFieldName) + "" }}
                          </ng-container>
                        <span *ngIf="columnConfigItem.separator == separator().BRACKETS">)</span>
                      </span>
                </ng-container>
              </ng-container>
            </td>
          </tr>
        </ng-container>
      </table>
    </div>
  </div>
</ng-container>
