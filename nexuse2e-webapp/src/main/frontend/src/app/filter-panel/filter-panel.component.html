<div class="expanded" [hidden]="!expanded">
  <div *ngFor="let filter of filters" class="filter">
    <div [ngSwitch]="filter.filterType">
      <app-select-filter
        *ngSwitchCase="getFilterType().SELECT"
        [allowedValues]="filter.allowedValues"
        [defaultValue]="filter.defaultValue"
        [fieldName]="filter.fieldName"
        (valueChange)="updateActiveFilters($event)"
      >
      </app-select-filter>
      <app-text-filter
        *ngSwitchCase="getFilterType().TEXT"
        [fieldName]="filter.fieldName"
        (valueChange)="updateActiveFilters($event)"
      >
      </app-text-filter>
    </div>
  </div>
  <button mat-flat-button
          (click)="applyFilters()"
          color="accent"
  >
    {{ "buttons.filter" | translate }}
  </button>
</div>
<div (click)="toggleVisibility()" class="toggle" [class.border]="expanded">
  <div class="collapsed" *ngIf="!expanded">
    <div *ngIf="activeFilters.length" class="filter-info">
      <div class="active-filters-badge">{{ activeFilters.length }}</div>
      {{ (activeFilters.length == 1 ? "labels.filterActive" : "labels.filtersActive") | translate }}
    </div>
    <div *ngIf="!activeFilters.length">
      {{ "labels.noFiltersActive" | translate }}
    </div>
  </div>
  <mat-icon>{{ expanded ? "keyboard_arrow_up" : "keyboard_arrow_down" }}</mat-icon>
</div>
